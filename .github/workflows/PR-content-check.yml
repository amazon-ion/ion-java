name: PR Content Check

on:
  workflow_call:
    outputs:
      result:
        description: "The result of PR content check"
        value: ${{ jobs.check-PR-content.outputs.output1 }}

jobs:
  check-PR-content:
    name: Check PR Content

    runs-on: ubuntu-latest

    outputs:
      output1: ${{ steps.check-content.outputs.result }}

    steps:
      - name: Checkout the incoming pull request
        uses: actions/checkout@v3
        with:
          ref: ${{ github.event.pull_request.head.sha }}
          fetch-depth: 0
          path: ion-new-commit

      - name: Check the content of the last commit
        id: check-content
        run: |
          cd ion-new-commit
          if [[ $(git log -1 --name-only) == *"src/"* ]] || [[ $(git log -1 --name-only) == *"ion/"* ]]; then echo "result=pass" >> $GITHUB_OUTPUT; else echo "result=fail" >> $GITHUB_OUTPUT; fi
